{% extends "global.html" %}
{% load i18n stylize %}

{% block breadcrumbs %}
<div class="breadcrumbs">
  <li>
    <a href="/">{% trans "Home" %}</a> <span class="divider">&rsaquo;</span>
  </li>
  <li class="active">
     {{ dataset.description }}
  </li>
</div>
{% endblock %}

{% block content %}
<div class="row">
  <div class="span12">
    <table class="table table-striped">
      <tr>
        <th>Layer</th>
        <th># Features</th>
        <th># To Do</th>
        <th># In Progress</th>
        <th># Complete</th>
        <th colspan="2"></th>
      </tr>
      {% for layer_in_dataset in layers_in_dataset %}
      <tr class="{{ layer_in_dataset.row_class }}">
        <td><strong>{{ layer_in_dataset.layer.name }}</strong></td>
        <td>{{ layer_in_dataset.features_total }}</td>
        {% if layer_in_dataset.completed %}
        <td colspan="3">Completed</td>
        {% else %}
        <td>
          {{ layer_in_dataset.features_todo }}
        </td>
        <td>
          {{ layer_in_dataset.features_in_progress }}
        </td>
        <td>
          {{ layer_in_dataset.features_complete }} 
        </td>
        {% endif %}
        <td>
          <div class="btn-group">
            <a class="btn btn-primary dropdown-toggle" data-toggle="dropdown" href="#">
              More Info
              <span class="caret"></span>
            </a>
            <ul class="dropdown-menu">
              <li>
                <a href="{% url linz2osm.data_dict.views.layer_stats layer_in_dataset.layer.name %}">
                  <i class="icon-th-list"></i>
                  Stats
                </a>
              </li>
              <li>
                <a href="{% url linz2osm.data_dict.views.preview layer_id=layer_in_dataset.layer %}">
                  <i class="icon-eye-open"></i>
                  Preview
                </a>
              </li>
            </ul>
          </div>
        </td>
        {% if layer_in_dataset.tagging_approved %}
        <td><a class="btn btn-primary" href="{% url linz2osm.workslices.views.create_workslice layer_in_dataset.id %}">Workslices</a>
        {% else %}
        <td>Tagging not ready</td>
        {% endif %}
      </tr>
      {% endfor %}
    </table>
  </div>
</div>
{% endblock %}
